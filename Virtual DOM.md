一种编程理念：**UI以数据的形式，存储在内存中**
以函数的形式来表达程序视图
常见的形式，一个自定义的对象来描述真实的DOM结构，里面包含了DOM结构渲染需要的所有数据

不是一个功能，
而是一种解决方案，是声明式编程、数据驱动开发、跨平台渲染的一个解决方案

## 虚拟DOM 优点
- 促进函数式UI编程，抽象组件、简化代码维护
- 跨平台能力，本质是JS对象，可用于小程序、IOS、安卓等应用层的抽象
- 数据绑定减少DOM操作，通过dom diff算法，计算所需最小DOM操作，合并中间操作，减少浏览器重排
- 缓存DOM和保存节点状态，优化DOM更新


## 虚拟DOM缺陷
+ **首次渲染性能**，在首次渲染大量DOM时，会有白屏，spa项目的通病，首页白屏时间
- **内存占用**，运行时维护一份虚拟DOM树的内存副本
- **频繁更新的开销** 在频繁更新时，需要更多的计算时间
- **大型项目的性能成本**，比较和计算虚拟DOM的成本不能忽视，diff过程是在运行时进行的



## 问题优化方向
- Vue项目 专注于优化虚拟DOM的diff算法
    - [[Vapor Mode]]
    - 带编译时信息的虚拟DOM  [[编译优化]]
        - vue框架同时控制着编译器和运行时，可以在框架层做编译时和运行时两个环境的通信，确切来说就是在运行时可以应用许多编译时的优化，编译器静态分析模板并在生成的代码中留下标记，运行时可以根据这些标记尽可能的走捷径
- React 引入Fiber 通过优先级分割的中断机制，改善因虚拟DOM树深度遍历造成的主进程阻塞问题
- Svelte 直接抛弃虚拟DOM，认为虚拟DOM纯属开销


## Vue的虚拟DOM是怎么设计的？

虚拟DOM作用：
1. 跨平台能力
虚拟DOM使用js对象来表示页面信息，这个对象可以根据需要，自定义渲染成不同的内容
SSR渲染；canvas/webGL； 甚至是native客户端页面

**自定义渲染器**

2. 利用js的能力，编程的方式，操作DOM，更加灵活

模版语法有一些限制，但是某些轻UI重逻辑的场景下，组件的核心在于复杂的逻辑，这时候模版语法可能会有一些吃力，使用render函数，能够更好的表达


渲染函数 VS template

template 更多用于日常UI开发，feature组件
渲染函数，更多用于功能型组件，组件的主要目的是用来做逻辑封装；
